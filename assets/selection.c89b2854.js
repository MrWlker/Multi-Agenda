import{v as Y,e as I}from"./QBtn.e69fa29f.js";import{M as N,p as X,g as k,a8 as M,w as A,o as O,G as C,R as p,B as d,I as $,a9 as j,aa as D}from"./index.5cf871b0.js";import{b as F,a as _,h as G}from"./scroll.e7411eb5.js";function re(){let t=null;const e=k();function r(){t!==null&&(clearTimeout(t),t=null)}return N(r),X(r),{removeTimeout:r,registerTimeout(l,i){r(),Y(e)===!1&&(t=setTimeout(()=>{t=null,l()},i))}}}function ie(t,e,r){let l;function i(){l!==void 0&&(M.remove(l),l=void 0)}return X(()=>{t.value===!0&&i()}),{removeFromHistory:i,addToHistory(){l={condition:()=>r.value===!0,handler:e},M.add(l)}}}const ne={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},se=["beforeShow","show","beforeHide","hide"];function ue({showing:t,canShow:e,hideOnRouteChange:r,handleShow:l,handleHide:i,processOnMount:m}){const n=k(),{props:s,emit:u,proxy:V}=n;let a;function W(o){t.value===!0?h(o):S(o)}function S(o){if(s.disable===!0||o!==void 0&&o.qAnchorHandled===!0||e!==void 0&&e(o)!==!0)return;const f=s["onUpdate:modelValue"]!==void 0;f===!0&&(u("update:modelValue",!0),a=o,C(()=>{a===o&&(a=void 0)})),(s.modelValue===null||f===!1)&&E(o)}function E(o){t.value!==!0&&(t.value=!0,u("beforeShow",o),l!==void 0?l(o):u("show",o))}function h(o){if(s.disable===!0)return;const f=s["onUpdate:modelValue"]!==void 0;f===!0&&(u("update:modelValue",!1),a=o,C(()=>{a===o&&(a=void 0)})),(s.modelValue===null||f===!1)&&P(o)}function P(o){t.value!==!1&&(t.value=!1,u("beforeHide",o),i!==void 0?i(o):u("hide",o))}function H(o){s.disable===!0&&o===!0?s["onUpdate:modelValue"]!==void 0&&u("update:modelValue",!1):o===!0!==t.value&&(o===!0?E:P)(a)}A(()=>s.modelValue,H),r!==void 0&&I(n)===!0&&A(()=>V.$route.fullPath,()=>{r.value===!0&&t.value===!0&&h()}),m===!0&&O(()=>{H(s.modelValue)});const q={show:S,hide:h,toggle:W};return Object.assign(V,q),q}let v=0,y,b,w,T=!1,x,z,U,c=null;function K(t){J(t)&&$(t)}function J(t){if(t.target===document.body||t.target.classList.contains("q-layout__backdrop"))return!0;const e=j(t),r=t.shiftKey&&!t.deltaX,l=!r&&Math.abs(t.deltaX)<=Math.abs(t.deltaY),i=r||l?t.deltaY:t.deltaX;for(let m=0;m<e.length;m++){const n=e[m];if(G(n,l))return l?i<0&&n.scrollTop===0?!0:i>0&&n.scrollTop+n.clientHeight===n.scrollHeight:i<0&&n.scrollLeft===0?!0:i>0&&n.scrollLeft+n.clientWidth===n.scrollWidth}return!0}function R(t){t.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function g(t){T!==!0&&(T=!0,requestAnimationFrame(()=>{T=!1;const{height:e}=t.target,{clientHeight:r,scrollTop:l}=document.scrollingElement;(w===void 0||e!==window.innerHeight)&&(w=r-e,document.scrollingElement.scrollTop=l),l>w&&(document.scrollingElement.scrollTop-=Math.ceil((l-w)/8))}))}function B(t){const e=document.body,r=window.visualViewport!==void 0;if(t==="add"){const{overflowY:l,overflowX:i}=window.getComputedStyle(e);y=F(window),b=_(window),x=e.style.left,z=e.style.top,U=window.location.href,e.style.left=`-${y}px`,e.style.top=`-${b}px`,i!=="hidden"&&(i==="scroll"||e.scrollWidth>window.innerWidth)&&e.classList.add("q-body--force-scrollbar-x"),l!=="hidden"&&(l==="scroll"||e.scrollHeight>window.innerHeight)&&e.classList.add("q-body--force-scrollbar-y"),e.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,p.is.ios===!0&&(r===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",g,d.passiveCapture),window.visualViewport.addEventListener("scroll",g,d.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",R,d.passiveCapture))}p.is.desktop===!0&&p.is.mac===!0&&window[`${t}EventListener`]("wheel",K,d.notPassive),t==="remove"&&(p.is.ios===!0&&(r===!0?(window.visualViewport.removeEventListener("resize",g,d.passiveCapture),window.visualViewport.removeEventListener("scroll",g,d.passiveCapture)):window.removeEventListener("scroll",R,d.passiveCapture)),e.classList.remove("q-body--prevent-scroll"),e.classList.remove("q-body--force-scrollbar-x"),e.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,e.style.left=x,e.style.top=z,window.location.href===U&&window.scrollTo(y,b),w=void 0)}function Q(t){let e="add";if(t===!0){if(v++,c!==null){clearTimeout(c),c=null;return}if(v>1)return}else{if(v===0||(v--,v>0))return;if(e="remove",p.is.ios===!0&&p.is.nativeMobile===!0){c!==null&&clearTimeout(c),c=setTimeout(()=>{B(e),c=null},100);return}}B(e)}function ae(){let t;return{preventBodyScroll(e){e!==t&&(t!==void 0||e===!0)&&(t=e,Q(e))}}}const L={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},Z=Object.keys(L);L.all=!0;function de(t){const e={};for(const r of Z)t[r]===!0&&(e[r]=!0);return Object.keys(e).length===0?L:(e.horizontal===!0?e.left=e.right=!0:e.left===!0&&e.right===!0&&(e.horizontal=!0),e.vertical===!0?e.up=e.down=!0:e.up===!0&&e.down===!0&&(e.vertical=!0),e.horizontal===!0&&e.vertical===!0&&(e.all=!0),e)}const ee=["INPUT","TEXTAREA"];function ce(t,e){return e.event===void 0&&t.target!==void 0&&t.target.draggable!==!0&&typeof e.handler=="function"&&ee.includes(t.target.nodeName.toUpperCase())===!1&&(t.qClonedBy===void 0||t.qClonedBy.indexOf(e.uid)===-1)}function fe(){if(window.getSelection!==void 0){const t=window.getSelection();t.empty!==void 0?t.empty():t.removeAllRanges!==void 0&&(t.removeAllRanges(),D.is.mobile!==!0&&t.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}export{ne as a,se as b,ue as c,ie as d,ae as e,fe as f,de as g,ce as s,re as u};
